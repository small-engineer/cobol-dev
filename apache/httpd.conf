ServerName localhost
Listen 80

# --- 必要モジュール ---
LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule unixd_module modules/mod_unixd.so
LoadModule dir_module modules/mod_dir.so
LoadModule alias_module modules/mod_alias.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule env_module modules/mod_env.so
LoadModule cgid_module modules/mod_cgid.so

ServerAdmin webmaster@localhost

DocumentRoot "/usr/local/apache2/htdocs"
<Directory "/usr/local/apache2/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>

# --- CGI API エンドポイント ---
ScriptAlias /api/ "/usr/local/apache2/cgi-bin/"
<Directory "/usr/local/apache2/cgi-bin">
    Options +ExecCGI
    SetHandler cgi-script
    Require all granted
</Directory>

# 環境変数の引き継ぎ
PassEnv DB_HOST
PassEnv DB_NAME
PassEnv DB_USER
PassEnv DB_PASS
PassEnv MYSQL_ROOT_PASSWORD
PassEnv COBOL_SERVER_HOST
PassEnv COBOL_SERVER_PORT

DirectoryIndex index.html
ErrorLog "/usr/local/apache2/logs/error.log"
